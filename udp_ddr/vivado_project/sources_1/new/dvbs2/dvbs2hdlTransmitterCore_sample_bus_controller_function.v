// -------------------------------------------------------------
// 
// File Name: F:\FileFolder\DVB\dvbs2_tx_new\hdlsrc\dvbs2hdlTransmitter\dvbs2hdlTransmitterCore\dvbs2hdlTransmitterCore_sample_bus_controller_function.v
// Created: 2024-01-10 13:49:57
// 
// Generated by MATLAB 23.2, HDL Coder 23.2, and Simulink 23.2
// 
// -------------------------------------------------------------


// -------------------------------------------------------------
// 
// Module: dvbs2hdlTransmitterCore_sample_bus_controller_function
// Source Path: dvbs2hdlTransmitterCore/DVB-S2 Tx/FEC Encoder/DVB-S2 BCH Encoder/Input controller/sample bus controller 
// functio
// Hierarchy Level: 6
// Model version: 4.5
// 
// -------------------------------------------------------------

`timescale 1 ns / 1 ns

module dvbs2hdlTransmitterCore_sample_bus_controller_function
          (clk,
           reset,
           enb,
           startIn,
           endIn,
           validIn,
           sampledStartIn,
           sampledEndIn,
           enbBCHEnc,
           reset_1);


  input   clk;
  input   reset;
  input   enb;
  input   startIn;
  input   endIn;
  input   validIn;
  output  sampledStartIn;  // ufix1
  output  sampledEndIn;  // ufix1
  output  enbBCHEnc;  // ufix1
  output  reset_1;  // ufix1


  reg  sampledStartIn_1;  // ufix1
  reg  sampledEndIn_1;  // ufix1
  reg  enbBCHEnc_1;  // ufix1
  reg  reset_2;  // ufix1
  reg  startInTempFlag;  // ufix1
  reg  endInFlag;  // ufix1
  reg  startInTempFlag_next;  // ufix1
  reg  endInFlag_next;  // ufix1
  reg  startInTempFlag_temp;  // ufix1
  reg  endInFlag_temp;  // ufix1


  always @(posedge clk or posedge reset)
    begin : sample_bus_controller_function_process
      if (reset == 1'b1) begin
        startInTempFlag <= 1'b0;
        endInFlag <= 1'b0;
      end
      else begin
        if (enb) begin
          startInTempFlag <= startInTempFlag_next;
          endInFlag <= endInFlag_next;
        end
      end
    end

  always @(endIn, endInFlag, startIn, startInTempFlag, validIn) begin
    startInTempFlag_temp = startInTempFlag;
    endInFlag_temp = endInFlag;
    if (endInFlag == 1'b1) begin
      startInTempFlag_temp = 1'b0;
      endInFlag_temp = 1'b0;
    end
    if ((startIn && validIn) && ( ! endIn)) begin
      if (startInTempFlag_temp == 1'b1) begin
        reset_2 = 1'b1;
        //reset
      end
      else begin
        reset_2 = 1'b0;
      end
      sampledStartIn_1 = 1'b1;
      //startSample
      startInTempFlag_temp = 1'b1;
    end
    else begin
      sampledStartIn_1 = 1'b0;
      reset_2 = 1'b0;
    end
    if (startInTempFlag_temp != 1'b0) begin
      enbBCHEnc_1 = 1'b1;
    end
    else begin
      enbBCHEnc_1 = 1'b0;
    end
    if ((((( ! startIn) && endIn) && validIn) && ( ~ endInFlag_temp)) && startInTempFlag_temp) begin
      sampledEndIn_1 = 1'b1;
      endInFlag_temp = 1'b1;
    end
    else begin
      sampledEndIn_1 = 1'b0;
    end
    startInTempFlag_next = startInTempFlag_temp;
    endInFlag_next = endInFlag_temp;
  end



  assign sampledStartIn = sampledStartIn_1;

  assign sampledEndIn = sampledEndIn_1;

  assign enbBCHEnc = enbBCHEnc_1;

  assign reset_1 = reset_2;

endmodule  // dvbs2hdlTransmitterCore_sample_bus_controller_function

